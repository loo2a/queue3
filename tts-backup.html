<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุงุฎุชุจุงุฑ ุงููุทู ุงูุงุญุชูุงุทู - TTS Backup</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gradient-to-br from-purple-900 to-indigo-900 min-h-screen text-white p-8" dir="rtl">
    <div class="max-w-4xl mx-auto">
        <!-- Header -->
        <div class="bg-white bg-opacity-10 backdrop-blur-lg rounded-2xl p-8 mb-8">
            <h1 class="text-4xl font-bold mb-4">๐ ุงุฎุชุจุงุฑ ูุธุงู ุงููุทู ุงูุงุญุชูุงุทู</h1>
            <p class="text-xl text-blue-200">ูุฐู ุงูุตูุญุฉ ุชุฎุชุจุฑ ูุธุงู Text-to-Speech ุงููุฏูุฌ ูู ุงููุชุตูุญ</p>
        </div>

        <!-- Voice Selection -->
        <div class="bg-white bg-opacity-10 backdrop-blur-lg rounded-2xl p-8 mb-8">
            <h2 class="text-2xl font-bold mb-4">ุงุฎุชูุงุฑ ุงูุตูุช</h2>
            <select id="voiceSelect" class="w-full p-3 rounded-lg bg-gray-800 border-2 border-blue-400 text-white">
                <option value="">ุฌุงุฑู ุชุญููู ุงูุฃุตูุงุช...</option>
            </select>
            <p class="text-sm text-blue-200 mt-2">ุงุฎุชุฑ ุตูุช ุนุฑุจู ููุญุตูู ุนูู ุฃูุถู ูุทู</p>
        </div>

        <!-- Test Controls -->
        <div class="bg-white bg-opacity-10 backdrop-blur-lg rounded-2xl p-8 mb-8">
            <h2 class="text-2xl font-bold mb-4">ุงุฎุชุจุงุฑ ุงููุทู</h2>
            
            <div class="mb-6">
                <label class="block mb-2 font-semibold">ุงููุต ูููุทู:</label>
                <textarea id="testText" class="w-full p-3 rounded-lg bg-gray-800 border-2 border-blue-400 text-white" rows="3">ุนูู ุงูุนููู ุฑูู ูุงุฆุฉ ูุฎูุณุฉ ูุณุชูู ุนูุงุฏุฉ ุทุจ ุงูุฃุณุฑุฉ</textarea>
            </div>

            <div class="grid md:grid-cols-2 gap-4 mb-6">
                <div>
                    <label class="block mb-2 font-semibold">ุงูุณุฑุนุฉ (Speed):</label>
                    <input type="range" id="rateInput" min="0.5" max="2" step="0.1" value="1" class="w-full">
                    <span id="rateValue" class="text-blue-200">1.0x</span>
                </div>
                <div>
                    <label class="block mb-2 font-semibold">ุฏุฑุฌุฉ ุงูุตูุช (Pitch):</label>
                    <input type="range" id="pitchInput" min="0.5" max="2" step="0.1" value="1" class="w-full">
                    <span id="pitchValue" class="text-blue-200">1.0</span>
                </div>
            </div>

            <div class="flex gap-4">
                <button onclick="speakText()" class="flex-1 bg-green-600 text-white py-3 rounded-lg font-bold hover:bg-green-700 transition">
                    ๐ ูุทู ุงููุต
                </button>
                <button onclick="stopSpeaking()" class="flex-1 bg-red-600 text-white py-3 rounded-lg font-bold hover:bg-red-700 transition">
                    ๐ ุฅููุงู
                </button>
            </div>
        </div>

        <!-- Number Testing -->
        <div class="bg-white bg-opacity-10 backdrop-blur-lg rounded-2xl p-8 mb-8">
            <h2 class="text-2xl font-bold mb-4">ุงุฎุชุจุงุฑ ุงูุฃุฑูุงู</h2>
            
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
                <button onclick="testNumber(5)" class="bg-blue-600 p-4 rounded-lg hover:bg-blue-700 transition font-bold">5</button>
                <button onclick="testNumber(25)" class="bg-blue-600 p-4 rounded-lg hover:bg-blue-700 transition font-bold">25</button>
                <button onclick="testNumber(100)" class="bg-blue-600 p-4 rounded-lg hover:bg-blue-700 transition font-bold">100</button>
                <button onclick="testNumber(468)" class="bg-blue-600 p-4 rounded-lg hover:bg-blue-700 transition font-bold">468</button>
            </div>

            <div class="flex gap-4">
                <input type="number" id="customNumber" placeholder="ุฑูู ูุฎุตุต" class="flex-1 p-3 rounded-lg bg-gray-800 border-2 border-blue-400 text-white">
                <button onclick="testCustomNumber()" class="bg-purple-600 text-white px-8 py-3 rounded-lg font-bold hover:bg-purple-700 transition">
                    ุงุฎุชุจุงุฑ
                </button>
            </div>
        </div>

        <!-- Call Simulation -->
        <div class="bg-white bg-opacity-10 backdrop-blur-lg rounded-2xl p-8 mb-8">
            <h2 class="text-2xl font-bold mb-4">ูุญุงูุงุฉ ุงููุฏุงุก ุงููุงูู</h2>
            
            <div class="grid md:grid-cols-2 gap-4 mb-4">
                <div>
                    <label class="block mb-2 font-semibold">ุฑูู ุงูุชุฐูุฑุฉ:</label>
                    <input type="number" id="ticketNumber" value="123" class="w-full p-3 rounded-lg bg-gray-800 border-2 border-blue-400 text-white">
                </div>
                <div>
                    <label class="block mb-2 font-semibold">ุงุณู ุงูุนูุงุฏุฉ:</label>
                    <input type="text" id="clinicName" value="ุนูุงุฏุฉ ุทุจ ุงูุฃุณุฑุฉ" class="w-full p-3 rounded-lg bg-gray-800 border-2 border-blue-400 text-white">
                </div>
            </div>

            <button onclick="simulateFullCall()" class="w-full bg-gradient-to-r from-green-600 to-blue-600 text-white py-4 rounded-lg font-bold hover:from-green-700 hover:to-blue-700 transition text-xl">
                ๐ค ูุญุงูุงุฉ ุงููุฏุงุก ุงููุงูู
            </button>
        </div>

        <!-- Voice Info -->
        <div class="bg-white bg-opacity-10 backdrop-blur-lg rounded-2xl p-8">
            <h2 class="text-2xl font-bold mb-4">ูุนูููุงุช ุงูุตูุช ุงูุญุงูู</h2>
            <div id="voiceInfo" class="space-y-2 text-blue-200">
                <p>ุงุณู ุงูุตูุช: <span id="voiceName" class="text-white font-semibold">---</span></p>
                <p>ุงููุบุฉ: <span id="voiceLang" class="text-white font-semibold">---</span></p>
                <p>ูุญูู: <span id="voiceLocal" class="text-white font-semibold">---</span></p>
            </div>
        </div>
    </div>

    <script>
        let voices = [];
        let selectedVoice = null;

        // Number to Arabic text conversion
        const numberToArabic = (num) => {
            const units = ['', 'ูุงุญุฏ', 'ุงุซูุงู', 'ุซูุงุซุฉ', 'ุฃุฑุจุนุฉ', 'ุฎูุณุฉ', 'ุณุชุฉ', 'ุณุจุนุฉ', 'ุซูุงููุฉ', 'ุชุณุนุฉ'];
            const tens = ['', 'ุนุดุฑุฉ', 'ุนุดุฑูู', 'ุซูุงุซูู', 'ุฃุฑุจุนูู', 'ุฎูุณูู', 'ุณุชูู', 'ุณุจุนูู', 'ุซูุงููู', 'ุชุณุนูู'];
            const hundreds = ['', 'ูุงุฆุฉ', 'ูุฆุชุงู', 'ุซูุงุซูุงุฆุฉ', 'ุฃุฑุจุนูุงุฆุฉ', 'ุฎูุณูุงุฆุฉ', 'ุณุชูุงุฆุฉ', 'ุณุจุนูุงุฆุฉ', 'ุซูุงููุงุฆุฉ', 'ุชุณุนูุงุฆุฉ'];
            
            if (num === 0) return 'ุตูุฑ';
            
            let result = [];
            
            // Hundreds
            const h = Math.floor(num / 100);
            if (h > 0) {
                result.push(hundreds[h]);
            }
            
            // Tens and units
            const remainder = num % 100;
            const t = Math.floor(remainder / 10);
            const u = remainder % 10;
            
            if (t > 0) {
                result.push(tens[t]);
            }
            
            if (u > 0) {
                result.push(units[u]);
            }
            
            return result.join(' ู ');
        };

        // Load voices
        function loadVoices() {
            voices = speechSynthesis.getVoices();
            const select = document.getElementById('voiceSelect');
            select.innerHTML = '';
            
            // Filter for Arabic voices first
            const arabicVoices = voices.filter(v => v.lang.startsWith('ar'));
            const otherVoices = voices.filter(v => !v.lang.startsWith('ar'));
            
            if (arabicVoices.length > 0) {
                const arabicGroup = document.createElement('optgroup');
                arabicGroup.label = 'ุฃุตูุงุช ุนุฑุจูุฉ';
                arabicVoices.forEach((voice, index) => {
                    const option = document.createElement('option');
                    option.value = index;
                    option.textContent = `${voice.name} (${voice.lang})`;
                    arabicGroup.appendChild(option);
                });
                select.appendChild(arabicGroup);
                
                // Select first Arabic voice by default
                selectedVoice = arabicVoices[0];
                updateVoiceInfo();
            }
            
            if (otherVoices.length > 0) {
                const otherGroup = document.createElement('optgroup');
                otherGroup.label = 'ุฃุตูุงุช ุฃุฎุฑู';
                otherVoices.forEach((voice, index) => {
                    const option = document.createElement('option');
                    option.value = arabicVoices.length + index;
                    option.textContent = `${voice.name} (${voice.lang})`;
                    otherGroup.appendChild(option);
                });
                select.appendChild(otherGroup);
            }
        }

        // Update voice info
        function updateVoiceInfo() {
            if (selectedVoice) {
                document.getElementById('voiceName').textContent = selectedVoice.name;
                document.getElementById('voiceLang').textContent = selectedVoice.lang;
                document.getElementById('voiceLocal').textContent = selectedVoice.localService ? 'ูุนู' : 'ูุง';
            }
        }

        // Voice selection change
        document.getElementById('voiceSelect').addEventListener('change', (e) => {
            selectedVoice = voices[parseInt(e.target.value)];
            updateVoiceInfo();
        });

        // Rate change
        document.getElementById('rateInput').addEventListener('input', (e) => {
            document.getElementById('rateValue').textContent = e.target.value + 'x';
        });

        // Pitch change
        document.getElementById('pitchInput').addEventListener('input', (e) => {
            document.getElementById('pitchValue').textContent = e.target.value;
        });

        // Speak text
        function speakText() {
            const text = document.getElementById('testText').value;
            const rate = parseFloat(document.getElementById('rateInput').value);
            const pitch = parseFloat(document.getElementById('pitchInput').value);
            
            const utterance = new SpeechSynthesisUtterance(text);
            utterance.voice = selectedVoice;
            utterance.rate = rate;
            utterance.pitch = pitch;
            utterance.lang = 'ar-SA';
            
            speechSynthesis.speak(utterance);
        }

        // Stop speaking
        function stopSpeaking() {
            speechSynthesis.cancel();
        }

        // Test number
        function testNumber(num) {
            const text = numberToArabic(num);
            const rate = parseFloat(document.getElementById('rateInput').value);
            const pitch = parseFloat(document.getElementById('pitchInput').value);
            
            const utterance = new SpeechSynthesisUtterance(text);
            utterance.voice = selectedVoice;
            utterance.rate = rate;
            utterance.pitch = pitch;
            utterance.lang = 'ar-SA';
            
            speechSynthesis.speak(utterance);
        }

        // Test custom number
        function testCustomNumber() {
            const num = parseInt(document.getElementById('customNumber').value);
            if (!isNaN(num) && num >= 0) {
                testNumber(num);
            } else {
                alert('ูุฑุฌู ุฅุฏุฎุงู ุฑูู ุตุญูุญ');
            }
        }

        // Simulate full call
        function simulateFullCall() {
            const ticketNum = parseInt(document.getElementById('ticketNumber').value);
            const clinic = document.getElementById('clinicName').value;
            const rate = parseFloat(document.getElementById('rateInput').value);
            const pitch = parseFloat(document.getElementById('pitchInput').value);
            
            const text = `ุนูู ุงูุนููู ุฑูู ${numberToArabic(ticketNum)} ${clinic}`;
            
            const utterance = new SpeechSynthesisUtterance(text);
            utterance.voice = selectedVoice;
            utterance.rate = rate;
            utterance.pitch = pitch;
            utterance.lang = 'ar-SA';
            
            speechSynthesis.speak(utterance);
        }

        // Initialize
        window.addEventListener('load', () => {
            loadVoices();
            
            // Chrome requires this event
            if (speechSynthesis.onvoiceschanged !== undefined) {
                speechSynthesis.onvoiceschanged = loadVoices;
            }
        });
    </script>
</body>
</html>
